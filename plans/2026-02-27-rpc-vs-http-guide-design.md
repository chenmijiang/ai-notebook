# RPC 与 HTTP 完全指南 — 设计文档

**日期：** 2026-02-27
**输出文件：** `docs/rpc-vs-http-guide.md`

## 背景与目标

为全栈/前端开发者编写一篇关于 RPC 与 HTTP 的技术指南，帮助读者建立完整的概念认知，并能在实际项目中做出正确的技术选型。

## 目标读者

全栈/前端开发者：已熟悉 HTTP，想深入了解 RPC 的异同与选型依据。

## 核心主题

对比分析与选型指南：深入对比 RPC 与 HTTP 的设计思想、适用场景、优劣势。

## 内容结构

### 第 1 章 概述

- 1.1 为什么要了解 RPC
- 1.2 HTTP 与 RPC 的本质区别（「资源」vs「函数调用」抽象）
- 1.3 典型使用场景概览

### 第 2 章 HTTP 的设计哲学

- 2.1 HTTP 协议基础（方法、状态码、Header）
- 2.2 REST 六大约束（无状态、统一接口、资源导向等）
- 2.3 REST API 设计规范（URL 设计、HTTP 动词语义、状态码选择）
- 2.4 REST 的局限性

### 第 3 章 RPC 的设计哲学

- 3.1 什么是 RPC（函数调用抽象）
- 3.2 接口定义语言（IDL）的作用
- 3.3 类型安全与代码生成
- 3.4 RPC 的工作机制（序列化、传输、stub）

### 第 4 章 主流 RPC 实现

- 4.1 gRPC：基于 Protobuf + HTTP/2，含 `.proto` 定义和 TypeScript 示例
- 4.2 tRPC：TypeScript 全栈类型安全，含 router 定义示例
- 4.3 JSON-RPC：轻量级，协议格式示例

### 第 5 章 深度对比

- 5.1 性能对比（序列化、连接复用）
- 5.2 类型安全对比
- 5.3 学习曲线与生态
- 5.4 对比总表（大表格）

### 第 6 章 选型指南

- 6.1 场景矩阵（微服务内部通信 / 前后端 BFF / 对外 API / 全栈 TypeScript）
- 6.2 决策流程图（Mermaid）

### 第 7 章 总结

- 速查表
- 参考资源

## 技术规格

| 项目         | 决定                           |
| ------------ | ------------------------------ |
| 文档语言     | 简体中文                       |
| 代码示例语言 | Node.js / TypeScript           |
| RPC 实现覆盖 | gRPC、tRPC、JSON-RPC           |
| 图表工具     | Mermaid（决策流程图）          |
| 文档风格     | 概念驱动，从认知建立到选型落地 |

## 写作规范

遵循 `.claude/skills/tech-docs-guide/SKILL.md` 中的规范：

- 标题格式：`# RPC 与 HTTP 完全指南`
- 章节编号：一级 `## 1.`，二级 `### 1.1`
- 大量使用 Markdown 表格进行对比
- 代码块标注语言，使用中文注释
- 结尾包含速查表和参考资源
